

int removeDuplicates(int* nums, int numsSize){
    if (numsSize==1)
        return 1;
    int start=1;
    int end=numsSize-1;
    int result=numsSize;
    int minCount=0;
    int maxCount=0;
    while(end > start)
    {
        printf("start=%d, end=%d\n",start,end);
        if (nums[start] == nums[start-1] && minCount==1)
        {
            if (maxCount != 2)
            {
                nums[start++]=nums[end--];
                result--;
                if (nums[end]==nums[end+1])
                    maxCount++;
                else
                    maxCount=0;
            }
            //if maxCount==2
            else 
            {
                for (int i=end ; i>=start ;i++)
                {
                    if (nums[i]==nums[i+1])
                        continue;
                    else
                    {
                        end=i;
                        maxCount=0;
                        break;
                    }
                }
            }
        }
        else if (nums[start] == nums[start-1] && minCount==0)
        {
            start++;
            minCount++;
        }
        //nums[start] != nums[start-1]
        else 
        {
            start++;
            minCount=0;
        }
    }
    
    //sort
    
    return result;
}
